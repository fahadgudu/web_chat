!function(e){function t(e,t){var n=e.data("ddslick"),r=e.find(".dd-selected"),a=r.siblings(".dd-selected-value"),s=(e.find(".dd-options"),r.siblings(".dd-pointer"),e.find(".dd-option").eq(t)),l=s.closest("li"),c=n.settings,d=n.settings.data[t];e.find(".dd-option").removeClass("dd-option-selected"),s.addClass("dd-option-selected"),n.selectedIndex=t,n.selectedItem=l,n.selectedData=d,c.showSelectedHTML?r.html((d.imageSrc?'<img class="dd-selected-image'+("right"==c.imagePosition?" dd-image-right":"")+'" src="'+d.imageSrc+'" />':"")+(d.text?'<label class="dd-selected-text">'+d.text+"</label>":"")+(d.color?'<span class="dd-selected-color" style="background-color: '+d.color+'"></span>':"")+(d.description?'<small class="dd-selected-description dd-desc'+(c.truncateDescription?" dd-selected-description-truncated":"")+'" >'+d.description+"</small>":"")):r.html(d.text),a.val(d.value),n.original.val(d.value),e.data("ddslick",n),i(e),o(e),"function"==typeof c.onSelected&&c.onSelected.call(this,n)}function n(t){var n=t.find(".dd-select"),i=n.siblings(".dd-options"),o=n.find(".dd-pointer"),a=i.is(":visible");e(".dd-click-off-close").not(i).slideUp(50),e(".dd-pointer").removeClass("dd-pointer-up"),a?(i.slideUp("fast"),o.removeClass("dd-pointer-up")):(i.slideDown("fast"),o.addClass("dd-pointer-up")),r(t)}function i(e){e.find(".dd-options").slideUp(50),e.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}function o(e){var t=e.find(".dd-select").css("height"),n=e.find(".dd-selected-description"),i=e.find(".dd-selected-image");n.length<=0&&i.length>0&&e.find(".dd-selected-text").css("lineHeight",t)}function r(t){t.find(".dd-option").each(function(){var n=e(this),i=n.css("height"),o=n.find(".dd-option-description"),r=t.find(".dd-option-image");o.length<=0&&r.length>0&&n.find(".dd-option-text").css("lineHeight",i)})}e.fn.ddslick=function(t){return a[t]?a[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exists."),void 0):a.init.apply(this,arguments)};var a={},s={data:[],keepJSONItemsOnTop:!1,width:260,height:null,background:"#eee",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,onSelected:function(){}},l='<div class="dd-select form-control"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>',c='<ul class="dd-options"></ul>',d='<style id="css-ddslick" type="text/css">.dd-select{ border-radius:4px; border:solid 1px #ccc; position:relative; cursor:pointer; background:none !important; }.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected{ overflow:hidden; display:block; font-weight:normal !important;}.dd-selected label{font-weight:normal !important;}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-option-color{ height:20px; width:50px;display:block;float:right}.dd-selected-color{ height:20px; width:50px;display:block;float:right; margin-right:20px}.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #ccc; border-top:none; list-style:none; box-shadow:0px 1px 5px #ddd; display:none; position:absolute; z-index:2000; margin:0; padding:0;background:#fff; overflow:auto;}.dd-option{ padding:10px 32px 10px 12px; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; color:#333; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f3f3f3; color:#000;}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#f6f6f6; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin-right:5px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}​ .dd-selected-text { font-weight:bold}​</style>';e("#css-ddslick").length<=0&&e(d).appendTo("head"),a.init=function(i){var i=e.extend({},s,i);return this.each(function(){var o=e(this),r=o.data("ddslick");if(!r){var a=[];i.data,o.find("option").each(function(){var t=e(this),n=t.data();a.push({text:e.trim(t.text()),value:t.val(),selected:t.is(":selected"),description:n.description,color:n.color,imageSrc:n.imagesrc})}),i.keepJSONItemsOnTop?e.merge(i.data,a):i.data=e.merge(a,i.data);var s=o,d=e('<div id="'+o.attr("id")+'"></div>');o.replaceWith(d),o=d,o.addClass("dd-container").append(l).append(c);var a=o.find(".dd-select"),u=o.find(".dd-options");u.css({width:i.width}),a.css({width:i.width,background:i.background}),o.css({width:i.width}),null!=i.height&&u.css({height:i.height,overflow:"auto"}),e.each(i.data,function(e,t){t.selected&&(i.defaultSelectedIndex=e),u.append('<li><a class="dd-option">'+(t.value?' <input class="dd-option-value" type="hidden" value="'+t.value+'" />':"")+(t.imageSrc?' <img class="dd-option-image'+("right"==i.imagePosition?" dd-image-right":"")+'" src="'+t.imageSrc+'" />':"")+(t.text?' <label class="dd-option-text">'+t.text+"</label>":"")+(t.description?' <small class="dd-option-description dd-desc">'+t.description+"</small>":"")+(t.color?' <span class="dd-option-color" style="background-color:'+t.color+'"></span>':"")+"</a></li>")});var p={settings:i,original:s,selectedIndex:-1,selectedItem:null,selectedData:null};if(o.data("ddslick",p),i.selectText.length>0&&null==i.defaultSelectedIndex)o.find(".dd-selected").html(i.selectText);else{var f=null!=i.defaultSelectedIndex&&i.defaultSelectedIndex>=0&&i.defaultSelectedIndex<i.data.length?i.defaultSelectedIndex:0;t(o,f)}o.find(".dd-select").on("click.ddslick",function(){n(o)}),o.find(".dd-option").on("click.ddslick",function(){t(o,e(this).closest("li").index())}),i.clickOffToClose&&(u.addClass("dd-click-off-close"),o.on("click.ddslick",function(e){e.stopPropagation()}),e("body").on("click",function(){e(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")}))}})},a.select=function(n){return this.each(function(){n.index&&t(e(this),n.index)})},a.open=function(){return this.each(function(){var t=e(this),i=t.data("ddslick");i&&n(t)})},a.close=function(){return this.each(function(){var t=e(this),n=t.data("ddslick");n&&i(t)})},a.destroy=function(){return this.each(function(){var t=e(this),n=t.data("ddslick");if(n){var i=n.original;t.removeData("ddslick").unbind(".ddslick").replaceWith(i)}})}}(jQuery);